<style>
    body{
        background-color: #382851;
    }
    #container{
        height:95vh;
    }
</style>
</style>
<script src="https://code.highcharts.com/maps/highmaps.js"></script>
<script src="purple-theme.js"></script>
<div id="container"></div>
<script>
    const urlParams = new URLSearchParams(window.location.search);
    const name = urlParams.get('name').charAt(0).toUpperCase() + urlParams.get('name').toLowerCase().slice(1);
    const type = urlParams.get('type').toLowerCase();
    // console.log(name)
    // const COLORS = {'hindu':'#FF4500','muslim':'#009000','christian':'#1E90FF','sikh':'#DC143C','buddhist':'#BE7F9D','jain':'#FA8072','other':'#A020F0','atheist':'#808080',};
    (async () => {
        mainData = await fetch(
            `https://chartify.in/api/${type}s/choropleth/${name}`
        ).then(response => response.json());

        console.log(mainData)

        const topology = await fetch(
        'https://besnoi.github.io/maps/json/india2018.json'
    ).then(response => response.json());

        mapChart = Highcharts.mapChart('container', {
            chart: {
                animation: true,
                map: topology
            },

            title: {
                text: `Frequency of People with ${type} ‘${name}’`,
                align:'center'
            },

            credits:{
                enabled:false
            },

            subtitle: {
                text: 'Source: forenames.io'
            },

            mapNavigation: {
                enabled: true,
                buttonOptions: {
                    verticalAlign: 'bottom'
                }
            },

            colorAxis: {
                    stops: [
                        [0, '#ff0000'],
                        [0.1, '#FFD580'],
                        [0.9, '#FDFD96']
                    ],
                minColor: "#ff0000",
                maxColor: "#FDFD96"
            },
            tooltip: {
            pointFormat: '{point.name}: 1 in {point.value}'
        },
            
            series: [{
                name: 'Ratio',
                states: {
                    hover: {
                        color: '#BADA55'
                    }
                },
                dataLabels: {
                    enabled: false,
                    format: '{point.name}'
                }
            }]
        });

        mapChart.update({
            series:{data:mainData}
        })
    })()

</script>
    
